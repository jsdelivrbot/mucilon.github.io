<!DOCTYPE html>
<html lang=en>
	<head>
		<meta charset=utf-8>
		<title>My first Three.js app in Altspace</title>
		<script src="https://cdn.rawgit.com/mrdoob/three.js/r84/build/three.js"></script>
		<script src="/dist/altspace.js"></script>
	</head>
	<body>
		<script>
		if (!window.altspace || !window.altspace.inClient) {
			document.write('<h3>To view this example, please open this page in <a href="http://altvr.com"> AltspaceVR </a></h3>');
		}

		function Ellipse( xRadius, yRadius ) {

		THREE.Curve.call( this );

		// add radius as a property
		this.xRadius = xRadius;
		this.yRadius = yRadius;

		}

		Ellipse.prototype = Object.create( THREE.Curve.prototype );
		Ellipse.prototype.constructor = Ellipse;

		// define the getPoint function for the subClass
		Ellipse.prototype.getPoint = function ( t ) {

			var radians = 2 * Math.PI * t;

			return new THREE.Vector3( this.xRadius * Math.cos( radians ),
									  0,
									  this.yRadius * Math.sin( radians ) );

		};



		var scene = new THREE.Scene();
		var renderer = altspace.getThreeJSRenderer({version:'0.2.0'});

		var geometry = new THREE.BoxGeometry(200, 200, 200);
		var material = new THREE.MeshBasicMaterial({
			color: 0x00ff00
		});
		var cube = new THREE.Mesh(geometry, material);
	//	scene.add(cube);


			    // path
			    var path = new Ellipse( 200, 400 );


			    var pathSegments = 64;
			    var tubeRadius = 0.5;
			    var radiusSegments = 16;
			    var closed = true;

			    var geometry = new THREE.TubeGeometry( path, pathSegments, tubeRadius, radiusSegments, closed );
			    
			    // material
			    var material = new THREE.MeshPhongMaterial( {
			        color: 0x0080ff, 
			    } );
			    
			    // mesh
			    mesh = new THREE.Mesh( geometry, material );
			    scene.add( mesh );


		//Update & Rendering
		function render() {
			requestAnimationFrame(render);

			cube.rotation.x += 0.01;
			cube.rotation.y += 0.01;

			renderer.render(scene);
		}
		render();
		</script>
	</body>
</html>
