<!DOCTYPE html>
<html lang=en>
	<head>
		<meta charset=utf-8>
		<title>My first Three.js app in Altspace</title>
		<script src="https://cdn.rawgit.com/mrdoob/three.js/r84/build/three.js"></script>
		<script src="/dist/altspace.js"></script>
	</head>
	<body>
		<script>
		if (!window.altspace || !window.altspace.inClient) {
			document.write('<h3>To view this example, please open this page in <a href="http://altvr.com"> AltspaceVR </a></h3>');
		}

		var scene = new THREE.Scene();
		var renderer = altspace.getThreeJSRenderer({version:'0.2.0'});

		var geometry = new THREE.BoxGeometry(200, 200, 200);
		var material = new THREE.MeshBasicMaterial({
			color: 0x00ff00
		});
		var cube = new THREE.Mesh(geometry, material);
	//	scene.add(cube);
				var closedSpline = new THREE.CatmullRomCurve3( [
					new THREE.Vector3( -60, -100,  60 ),
					new THREE.Vector3( -60,   20,  60 ),
					new THREE.Vector3( -60,  120,  60 ),
					new THREE.Vector3(  60,   20, -60 ),
					new THREE.Vector3(  60, -100, -60 )
				] );

				closedSpline.type = 'catmullrom';
				closedSpline.closed = true;

				var extrudeSettings = {
					steps			: 100,
					bevelEnabled	: false,
					extrudePath		: closedSpline
				};

/*
				var pts = [], count = 3;

				for ( var i = 0; i < count; i ++ ) {

					var l = 20;

					var a = 2 * i / count * Math.PI;

					pts.push( new THREE.Vector2 ( Math.cos( a ) * l, Math.sin( a ) * l ) );

				}
*/
				var curve = new THREE.EllipseCurve(
				0,  0,            // ax, aY
				10, 10,           // xRadius, yRadius
				0,  2 * Math.PI,  // aStartAngle, aEndAngle
				false,            // aClockwise
				0                 // aRotation
				);

				var path = new THREE.Path( curve.getPoints( 50 ) );

				var shape = new THREE.Shape( path );

				var geometry = new THREE.ExtrudeGeometry( shape, extrudeSettings );

				var material = new THREE.MeshLambertMaterial( { color: 0xb00000, wireframe: false } );

				var mesh = new THREE.Mesh( geometry, material );

				scene.add( mesh );

		//Update & Rendering
		function render() {
			requestAnimationFrame(render);

			cube.rotation.x += 0.01;
			cube.rotation.y += 0.01;

			renderer.render(scene);
		}
		render();
		</script>
	</body>
</html>
